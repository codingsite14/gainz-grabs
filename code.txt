import React, { useState, useEffect } from 'react';
import { 
  Menu, X, ChevronRight, Dumbbell, Leaf, Zap, Award, 
  MapPin, Phone, Mail, Instagram, Facebook, Twitter, 
  CheckCircle, TrendingUp, Users, DollarSign, Clock, 
  coffee, ArrowRight, ShieldCheck, Activity, Star, Flame, Droplet, Sparkles, Loader
} from 'lucide-react';

/* --- ASSET CONFIGURATION --- */
const IMAGES = {
  // Your uploaded logo
  logo: "/CTC_G&G.jpg",
  
  // High-Energy Urban Fitness Imagery
  hero: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=1600&q=80", 
  food_hero: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=800&q=80",
  interior: "https://images.unsplash.com/photo-1593079831268-3381b0db4a77?auto=format&fit=crop&w=800&q=80",
  
  // Menu Category Images (Generic fallbacks for variety)
  coffee: "https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?auto=format&fit=crop&w=600&q=80",
  smoothie_green: "https://images.unsplash.com/photo-1610970881699-44a5587cabec?auto=format&fit=crop&w=600&q=80",
  smoothie_berry: "https://images.unsplash.com/photo-1553530979-7ee52a2670c4?auto=format&fit=crop&w=600&q=80",
  smoothie_choco: "https://images.unsplash.com/photo-1572490122747-3968b75cc699?auto=format&fit=crop&w=600&q=80",
  juice_orange: "https://images.unsplash.com/photo-1613478223719-2ab802602423?auto=format&fit=crop&w=600&q=80",
  juice_green: "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?auto=format&fit=crop&w=600&q=80",
  tea: "https://images.unsplash.com/photo-1597481499750-3e6b22637e12?auto=format&fit=crop&w=600&q=80",
  pancakes: "https://images.unsplash.com/photo-1528207776546-365bb710ee93?auto=format&fit=crop&w=600&q=80",
  bowl: "https://images.unsplash.com/photo-1543339308-43e59d6b73a6?auto=format&fit=crop&w=600&q=80",
  soup: "https://images.unsplash.com/photo-1547592166-23acbe34071b?auto=format&fit=crop&w=600&q=80",
  bar: "https://images.unsplash.com/photo-1622483767028-3f66f32aef97?auto=format&fit=crop&w=600&q=80",
  chips: "https://images.unsplash.com/photo-1566478989037-eec170784d0b?auto=format&fit=crop&w=600&q=80",
  dosa: "https://images.unsplash.com/photo-1589301760557-01db1b4db106?auto=format&fit=crop&w=600&q=80", // Using Idli/Dosa like image
};

/* --- SHARED COMPONENTS --- */

const Button = ({ children, variant = 'primary', className = '', onClick }) => {
  const baseStyle = "px-8 py-4 font-black uppercase tracking-wider transition-all duration-300 flex items-center justify-center gap-2 skew-x-[-10deg]";
  const variants = {
    primary: "bg-lime-400 text-black hover:bg-lime-300 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",
    secondary: "bg-black text-white hover:bg-gray-900 shadow-[4px_4px_0px_0px_rgba(163,230,53,1)]",
    outline: "border-2 border-black text-black hover:bg-black hover:text-white",
    ghost: "text-black hover:text-lime-600 hover:underline"
  };

  return (
    <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>
      <span className="skew-x-[10deg] flex items-center gap-2">{children}</span>
    </button>
  );
};

const Marquee = () => (
  <div className="bg-lime-400 text-black py-3 overflow-hidden whitespace-nowrap border-y-2 border-black">
    <div className="animate-marquee inline-block font-black uppercase tracking-widest text-sm md:text-base">
      <span className="mx-4">Eat Clean. Train Hard.</span> ‚Ä¢ 
      <span className="mx-4">No Added Sugar.</span> ‚Ä¢ 
      <span className="mx-4">High Protein.</span> ‚Ä¢ 
      <span className="mx-4">100% Natural.</span> ‚Ä¢ 
      <span className="mx-4">Gym Integrated.</span> ‚Ä¢ 
      <span className="mx-4">Eat Clean. Train Hard.</span> ‚Ä¢ 
      <span className="mx-4">No Added Sugar.</span> ‚Ä¢ 
      <span className="mx-4">High Protein.</span> ‚Ä¢ 
    </div>
  </div>
);

const SectionHeading = ({ title, subtitle, dark = false }) => (
  <div className="mb-16">
    <h4 className={`font-bold uppercase tracking-[0.2em] mb-2 flex items-center gap-2 ${dark ? 'text-lime-400' : 'text-lime-600'}`}>
      <Activity size={16} /> {subtitle}
    </h4>
    <h2 className={`text-5xl md:text-7xl font-black uppercase leading-none italic ${dark ? 'text-white' : 'text-black'}`}>
      {title}
    </h2>
  </div>
);

const Badge = ({ icon: Icon, text }) => (
  <span className="inline-flex items-center gap-1 bg-gray-100 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider text-gray-700">
    <Icon size={10} className="text-lime-600" /> {text}
  </span>
);

/* --- AI COACH COMPONENT --- */

const AICoachModal = ({ isOpen, onClose }) => {
  const [step, setStep] = useState(0);
  const [goal, setGoal] = useState('');
  const [activity, setActivity] = useState('');
  const [diet, setDiet] = useState('');
  const [loading, setLoading] = useState(false);
  const [recommendation, setRecommendation] = useState(null);
  const [error, setError] = useState('');

  if (!isOpen) return null;

  const handleRecommendation = async () => {
    setLoading(true);
    setError('');
    
    // IMPORTANT: Replace with your actual Gemini API Key for the feature to work on the live site
    const apiKey = ""; 
    
    const menuContext = `
      MENU:
      - Protein Coffee Kickstart (20g protein, caffeine)
      - The Anabolic Bowl (45g protein, chicken, quinoa)
      - Green Detox Smoothie (Kale, apple, vegan)
      - Mass Gainer Oats Shake (High calorie, bulking)
      - Berry Replenish (Antioxidants, recovery)
      - Protein Pancakes (Whey, oats, breakfast)
      - Cucumber Cooler (Low cal, hydration)
      - Protein Dosa (Lentil, vegan protein)
    `;

    const prompt = `
      You are the 'Gainz & Grabs' Smart Coach, an AI nutritionist for a fitness cafe.
      Based on the user's details, recommend 1 specific item from the MENU below.
      
      ${menuContext}

      User Goal: ${goal}
      User Recent Workout: ${activity}
      User Diet Preference: ${diet}

      Output format:
      "üî• **[Item Name]**
      [1 short, punchy sentence explaining why it fits their goal. Be hype and motivating!]"
    `;

    try {
      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }]
        })
      });

      const data = await response.json();
      if (data.error) throw new Error(data.error.message);
      
      const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
      setRecommendation(text);
      setStep(4);
    } catch (err) {
      console.error(err);
      setError("Even coaches need a rest day. Try again later!");
    } finally {
      setLoading(false);
    }
  };

  const reset = () => {
    setStep(0);
    setGoal('');
    setActivity('');
    setDiet('');
    setRecommendation(null);
  };

  return (
    <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">
      <div className="absolute inset-0 bg-black/90 backdrop-blur-sm" onClick={onClose}></div>
      <div className="relative bg-white w-full max-w-md p-8 shadow-2xl border-4 border-lime-400 skew-x-[-2deg]">
        <button onClick={onClose} className="absolute top-4 right-4 text-black hover:text-lime-500">
          <X size={24} />
        </button>

        <div className="skew-x-[2deg]">
          <h3 className="text-3xl font-black uppercase mb-6 flex items-center gap-2">
            <Sparkles className="text-lime-500 fill-current" /> Smart Coach
          </h3>

          {step === 0 && (
            <div className="space-y-4">
              <p className="font-bold text-gray-600">What's the mission today?</p>
              {['Build Muscle (Bulk)', 'Lose Fat (Cut)', 'Energy / Pre-Workout', 'Recovery / Post-Workout'].map(opt => (
                <button key={opt} onClick={() => { setGoal(opt); setStep(1); }} className="w-full text-left p-4 border-2 border-black font-bold uppercase hover:bg-black hover:text-lime-400 transition-colors">
                  {opt}
                </button>
              ))}
            </div>
          )}

          {step === 1 && (
            <div className="space-y-4">
              <p className="font-bold text-gray-600">What did you just smash?</p>
              {['Leg Day / Heavy Lifting', 'Cardio / HIIT', 'Rest Day', 'Just Woke Up'].map(opt => (
                <button key={opt} onClick={() => { setActivity(opt); setStep(2); }} className="w-full text-left p-4 border-2 border-black font-bold uppercase hover:bg-black hover:text-lime-400 transition-colors">
                  {opt}
                </button>
              ))}
            </div>
          )}

          {step === 2 && (
            <div className="space-y-4">
              <p className="font-bold text-gray-600">Any dietary rules?</p>
              {['None (I eat everything)', 'Vegetarian', 'Vegan', 'Low Sugar'].map(opt => (
                <button key={opt} onClick={() => { setDiet(opt); setStep(3); handleRecommendation(); }} className="w-full text-left p-4 border-2 border-black font-bold uppercase hover:bg-black hover:text-lime-400 transition-colors">
                  {opt}
                </button>
              ))}
            </div>
          )}

          {step === 3 && (
            <div className="text-center py-12">
              <Loader className="animate-spin w-12 h-12 text-lime-500 mx-auto mb-4" />
              <p className="font-black uppercase text-xl animate-pulse">Analyzing Macros...</p>
            </div>
          )}

          {step === 4 && (
            <div className="text-center">
              <div className="bg-gray-100 p-6 border-l-8 border-lime-400 mb-6 text-left">
                 <div className="markdown-content text-lg font-medium leading-relaxed">
                   {/* Simple render of markdown-like bolding */}
                   {recommendation && recommendation.split('**').map((part, i) => 
                     i % 2 === 1 ? <span key={i} className="font-black text-lime-700 bg-lime-100 px-1">{part}</span> : part
                   )}
                 </div>
              </div>
              <div className="flex gap-4">
                 <Button className="flex-1" onClick={onClose}>Got It</Button>
                 <button onClick={reset} className="font-bold underline text-sm text-gray-500">Ask Again</button>
              </div>
            </div>
          )}

          {error && (
            <div className="text-center py-8">
              <p className="text-red-600 font-bold mb-4">{error}</p>
              <button onClick={reset} className="font-bold underline">Try Again</button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};


/* --- PAGES --- */

/* 1. HOME PAGE */
const HomePage = ({ navigate, openCoach }) => {
  return (
    <div className="animate-fade-in">
      {/* Hero Section */}
      <div className="relative min-h-screen flex flex-col md:flex-row bg-gray-100">
        {/* Left Content */}
        <div className="md:w-1/2 flex flex-col justify-center px-6 md:px-20 py-20 relative z-10">
          <div className="mb-8">
            <span className="bg-black text-white px-4 py-1 font-bold uppercase text-xs tracking-widest inline-block mb-4 skew-x-[-10deg]">
              <span className="skew-x-[10deg]">Est. 2023</span>
            </span>
            <h1 className="text-6xl md:text-8xl font-black uppercase leading-[0.9] mb-6 text-black">
              Fuel<br/>
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-lime-500 to-lime-300">Your</span><br/>
              Ambition
            </h1>
            <p className="text-xl text-gray-600 max-w-md font-medium border-l-4 border-lime-400 pl-6 mb-6">
              The only caf√© designed for the dedicated. Precision nutrition meets gourmet taste inside your favorite gyms.
            </p>
            
            {/* AI Coach Promo */}
            <div onClick={openCoach} className="inline-flex items-center gap-3 bg-white border border-gray-200 p-3 rounded-lg shadow-sm cursor-pointer hover:border-lime-500 transition-colors group">
              <div className="bg-lime-100 p-2 rounded-full group-hover:bg-lime-400 transition-colors">
                <Sparkles size={20} className="text-lime-700 group-hover:text-black" />
              </div>
              <div className="text-left">
                <p className="text-xs font-bold text-gray-500 uppercase tracking-wide">Not sure what to eat?</p>
                <p className="font-bold text-black group-hover:text-lime-600">Ask our AI Macro Coach &rarr;</p>
              </div>
            </div>

          </div>
          <div className="flex flex-col sm:flex-row gap-4">
            <Button onClick={() => navigate('menu')}>View Menu</Button>
            <Button variant="outline" onClick={() => navigate('franchise')}>Franchise Info</Button>
          </div>
        </div>

        {/* Right Image */}
        <div className="md:w-1/2 relative h-[50vh] md:h-auto">
          <img src={IMAGES.hero} alt="Gym Athlete" className="w-full h-full object-cover grayscale contrast-125" />
          <div className="absolute inset-0 bg-lime-400 mix-blend-multiply opacity-40"></div>
          <div className="absolute bottom-10 right-10 md:left-10 text-white text-right md:text-left">
            <h3 className="text-4xl font-black uppercase italic">#GainzAndGrabs</h3>
          </div>
        </div>
      </div>

      <Marquee />

      {/* Featured Grid (Bento Style) */}
      <section className="py-24 px-6 bg-white">
        <div className="container mx-auto">
          <SectionHeading title="Top Picks" subtitle="Favorites" />
          
          <div className="grid grid-cols-1 md:grid-cols-3 md:grid-rows-2 gap-4 h-auto md:h-[800px]">
            {/* Large Item */}
            <div className="md:col-span-2 md:row-span-2 relative group overflow-hidden bg-black rounded-3xl cursor-pointer" onClick={() => navigate('menu')}>
              <img src={IMAGES.food_hero} alt="Bowl" className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-80" />
              <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"></div>
              <div className="absolute bottom-0 left-0 p-10">
                <div className="bg-lime-400 text-black text-xs font-bold px-3 py-1 inline-block mb-3 uppercase">Best Seller</div>
                <h3 className="text-4xl font-black text-white uppercase mb-2">The Anabolic Bowl</h3>
                <p className="text-gray-300 mb-4 max-w-md">Loaded with 45g Protein. Quinoa base, grilled chicken, edamame, and spicy peanut dressing.</p>
                <span className="text-lime-400 font-bold flex items-center gap-2">Order Now <ArrowRight size={20}/></span>
              </div>
            </div>

            {/* Small Item 1 */}
            <div className="relative group overflow-hidden bg-gray-100 rounded-3xl cursor-pointer" onClick={() => navigate('menu')}>
              <img src={IMAGES.smoothie_green} alt="Smoothie" className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
              <div className="absolute top-4 right-4 bg-white/90 backdrop-blur p-2 rounded-xl">
                 <Zap className="text-lime-500 fill-current" size={20} />
              </div>
              <div className="absolute bottom-0 left-0 p-6 w-full bg-white/90 backdrop-blur-md">
                <h4 className="font-bold text-xl uppercase">Green Detox</h4>
                <p className="text-xs text-gray-500">Kale, Apple, Lemon</p>
              </div>
            </div>

            {/* Small Item 2 */}
            <div className="relative group overflow-hidden bg-gray-100 rounded-3xl cursor-pointer" onClick={() => navigate('menu')}>
              <img src={IMAGES.coffee} alt="Coffee" className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
               <div className="absolute top-4 right-4 bg-white/90 backdrop-blur p-2 rounded-xl">
                 <Dumbbell className="text-black fill-current" size={20} />
              </div>
              <div className="absolute bottom-0 left-0 p-6 w-full bg-white/90 backdrop-blur-md">
                <h4 className="font-bold text-xl uppercase">Espresso Protein</h4>
                <p className="text-xs text-gray-500">20g Whey Isolate</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Franchise Callout - Industrial Style */}
      <section className="py-24 bg-black text-white relative">
        <div className="container mx-auto px-6 relative z-10">
          <div className="border-4 border-lime-400 p-8 md:p-20 relative">
             {/* Decorative Corners */}
             <div className="absolute -top-4 -left-4 w-12 h-12 bg-black border-r-4 border-b-4 border-lime-400 rotate-180"></div>
             <div className="absolute -bottom-4 -right-4 w-12 h-12 bg-black border-r-4 border-b-4 border-lime-400"></div>

             <div className="grid md:grid-cols-2 gap-12 items-center">
                <div>
                  <h2 className="text-5xl md:text-7xl font-black uppercase mb-6 leading-none">
                    Own The <span className="text-lime-400">Hustle</span>
                  </h2>
                  <p className="text-gray-400 text-lg mb-8 max-w-lg">
                    Join the fastest growing fitness caf√© network in India. Low overhead, high retention, and a community that eats here everyday.
                  </p>
                  <ul className="space-y-4 mb-8 font-bold uppercase tracking-wider text-sm">
                    <li className="flex items-center gap-3"><CheckCircle className="text-lime-400"/> Proven Gym Model</li>
                    <li className="flex items-center gap-3"><CheckCircle className="text-lime-400"/> High ROI Potential</li>
                    <li className="flex items-center gap-3"><CheckCircle className="text-lime-400"/> Full Operational Support</li>
                  </ul>
                  <Button variant="primary" onClick={() => navigate('franchise')}>Start Franchising</Button>
                </div>
                <div className="grid grid-cols-2 gap-4">
                  {[
                    { label: "Outlets", val: "15+" },
                    { label: "Cities", val: "5" },
                    { label: "Happy Clients", val: "50K+" },
                    { label: "Growth", val: "200%" }
                  ].map((stat, i) => (
                    <div key={i} className="bg-gray-900 p-8 text-center border border-gray-800 hover:border-lime-400 transition-colors">
                      <div className="text-4xl font-black text-white mb-2">{stat.val}</div>
                      <div className="text-lime-400 uppercase text-xs font-bold tracking-widest">{stat.label}</div>
                    </div>
                  ))}
                </div>
             </div>
          </div>
        </div>
      </section>
    </div>
  );
};

/* 2. MENU PAGE */
const MenuPage = () => {
  const categories = [
    { 
      title: "Signature Drinks", 
      items: [
        { name: "Protein Coffee Kickstart", price: "280", tags: [{t:'Protein', i:Dumbbell}, {t:'Energy', i:Zap}], desc: "High caffeine, 20g whey isolate.", img: IMAGES.coffee },
        { name: "Protein Hot Chocolate", price: "290", tags: [{t:'Comfort', i:Star}, {t:'Protein', i:Dumbbell}], desc: "Guilt-free cocoa with slow-release casein.", img: IMAGES.smoothie_choco },
        { name: "Cucumber Cooler", price: "180", tags: [{t:'Hydrate', i:Droplet}, {t:'Vegan', i:Leaf}], desc: "Refreshing cucumber, lime, and mint.", img: IMAGES.juice_green },
        { name: "Ginger-Lemon Twist", price: "180", tags: [{t:'Detox', i:Leaf}, {t:'Zest', i:Zap}], desc: "Zesty digestion aid with a spicy kick.", img: IMAGES.juice_orange },
        { name: "Citrus Hydrator", price: "200", tags: [{t:'Vit C', i:Star}, {t:'Hydrate', i:Droplet}], desc: "Orange, grapefruit, and electrolyte mix.", img: IMAGES.juice_orange },
        { name: "Watermelon & Mint Spritz", price: "190", tags: [{t:'Fresh', i:Leaf}, {t:'Cool', i:Droplet}], desc: "Summer in a glass. Pure hydration.", img: IMAGES.smoothie_berry },
        { name: "Ginger-Turmeric Shot", price: "120", tags: [{t:'Immunity', i:ShieldCheck}], desc: "Concentrated anti-inflammatory booster.", img: IMAGES.juice_orange },
        { name: "Berry Immunity Smoothie", price: "250", tags: [{t:'Antiox', i:Star}, {t:'Vegan', i:Leaf}], desc: "Mixed berries, chia seeds, almond milk.", img: IMAGES.smoothie_berry },
        { name: "Turmeric Latte (Golden Milk)", price: "220", tags: [{t:'Recovery', i:Activity}], desc: "Warm almond milk, turmeric, black pepper.", img: IMAGES.coffee },
        { name: "Lemon & Honey Tea", price: "150", tags: [{t:'Soothing', i:Leaf}], desc: "Classic warm recovery drink.", img: IMAGES.tea },
      ]
    },
    { 
      title: "Power Smoothies / Shakes", 
      items: [
        { name: "Banana Honey Power Shake", price: "260", tags: [{t:'Energy', i:Zap}, {t:'Carbs', i:Activity}], desc: "Natural pre-workout energy.", img: IMAGES.smoothie_green },
        { name: "Date, Nut & Seeds Protein Shake", price: "320", tags: [{t:'Bulking', i:Dumbbell}], desc: "Calorie dense, healthy fats & protein.", img: IMAGES.smoothie_choco },
        { name: "Mass Gainer Oats Shake", price: "350", tags: [{t:'Mass', i:Dumbbell}, {t:'Fiber', i:Leaf}], desc: "Oats, peanut butter, whey, banana.", img: IMAGES.smoothie_green },
        { name: "Choco-Banana Mass Builder", price: "340", tags: [{t:'Taste', i:Star}, {t:'Mass', i:Dumbbell}], desc: "Rich chocolate meets potassium-rich banana.", img: IMAGES.smoothie_choco },
        { name: "Berry Replenish", price: "300", tags: [{t:'Recovery', i:Activity}], desc: "Antioxidant rich recovery blend.", img: IMAGES.smoothie_berry },
        { name: "Coconut & Pineapple Rehydrator", price: "280", tags: [{t:'Hydrate', i:Droplet}, {t:'Tropical', i:Leaf}], desc: "Electrolytes from coconut water.", img: IMAGES.smoothie_green },
        { name: "Strawberry & Banana Refuel", price: "290", tags: [{t:'Classic', i:Star}], desc: "The timeless fitness favorite.", img: IMAGES.smoothie_berry },
        { name: "Recovery Mango Shake", price: "280", tags: [{t:'Seasonal', i:Leaf}], desc: "Alphonso mango pulp with yogurt/whey.", img: IMAGES.juice_orange },
        { name: "Chocolate Comfort Shake", price: "310", tags: [{t:'Mood', i:Star}], desc: "Dark chocolate, low sugar, high taste.", img: IMAGES.smoothie_choco },
        { name: "Energy Burst Smoothie", price: "270", tags: [{t:'Focus', i:Zap}], desc: "Fruits blend with a caffeine kick.", img: IMAGES.smoothie_green },
        { name: "Power-Up Protein Shake", price: "300", tags: [{t:'Lean', i:Dumbbell}], desc: "25g Isolate, water base, zero fat.", img: IMAGES.smoothie_choco },
        { name: "Tropical Power Smoothie", price: "290", tags: [{t:'Exotic', i:Leaf}], desc: "Passion fruit, mango, pineapple blend.", img: IMAGES.juice_orange },
        { name: "Matcha Mint Energy", price: "330", tags: [{t:'Focus', i:Zap}, {t:'Detox', i:Leaf}], desc: "Green tea caffeine with refreshing mint.", img: IMAGES.smoothie_green },
      ]
    },
    { 
      title: "Functional Beverages", 
      items: [
        { name: "Citrus-Ade Pre-Workout", price: "200", tags: [{t:'Pump', i:Dumbbell}], desc: "Natural citrulline from fruits.", img: IMAGES.juice_orange },
        { name: "Cinnamon & Apple Slimmer", price: "220", tags: [{t:'Burn', i:Flame}], desc: "Metabolism boosting spice blend.", img: IMAGES.juice_orange },
        { name: "Green Detox & Slimmer", price: "240", tags: [{t:'Cleanse', i:Leaf}, {t:'Burn', i:Flame}], desc: "Spinach, celery, cucumber, lemon.", img: IMAGES.juice_green },
        { name: "Ginger & Lemon Waist-Whittle", price: "210", tags: [{t:'Digest', i:Activity}], desc: "Supports gut health and metabolism.", img: IMAGES.juice_orange },
        { name: "Meal Replacement Shake", price: "400", tags: [{t:'Full', i:CheckCircle}], desc: "Hazelnut Chocolate. Complete nutrition.", img: IMAGES.smoothie_choco },
      ]
    },
    { 
      title: "Protein Foods", 
      items: [
        { name: "Protein Pancakes", price: "350", tags: [{t:'Breakfast', i:Star}, {t:'Protein', i:Dumbbell}], desc: "Stack of oat-whey pancakes with honey.", img: IMAGES.pancakes },
        { name: "Protein Chillas", price: "280", tags: [{t:'Savory', i:Leaf}, {t:'Fiber', i:Leaf}], desc: "Gram flour & veggie savory pancakes.", img: IMAGES.pancakes },
        { name: "Protein Dosa & Idli", price: "250", tags: [{t:'Tradition', i:Star}], desc: "Lentil batter fortified with pea protein.", img: IMAGES.dosa },
        { name: "Soup Cup (Manchow)", price: "180", tags: [{t:'Spicy', i:Flame}, {t:'Protein', i:Dumbbell}], desc: "Soy-fortified spicy asian soup.", img: IMAGES.soup },
        { name: "Soup Cup (Tomato)", price: "180", tags: [{t:'Classic', i:Star}, {t:'Light', i:Leaf}], desc: "Rich tomato broth with whey isolate.", img: IMAGES.soup },
      ]
    },
    { 
      title: "Bars & Snacks", 
      items: [
        { name: "Plant Protein Bar - Hazelnut", price: "120", tags: [{t:'Vegan', i:Leaf}, {t:'Snack', i:Star}], desc: "Crunchy hazelnut, pea protein base.", img: IMAGES.bar },
        { name: "Whey Protein Bar - Orange", price: "120", tags: [{t:'Whey', i:Dumbbell}, {t:'Zest', i:Zap}], desc: "Choco-orange flavor, 20g protein.", img: IMAGES.bar },
        { name: "Plant Protein Bar - Fruit & Nut", price: "120", tags: [{t:'Energy', i:Zap}], desc: "Dried fruits, nuts, and soy crispies.", img: IMAGES.bar },
        { name: "Pop Chips", price: "80", tags: [{t:'Low Fat', i:ShieldCheck}], desc: "Popped not fried. Guilt free crunch.", img: IMAGES.chips },
      ]
    }
  ];

  return (
    <div className="pt-24 pb-20 bg-gray-50 min-h-screen">
      <div className="container mx-auto px-6">
        <SectionHeading title="The Menu" subtitle="Performance Nutrition" />
        
        <div className="space-y-20">
          {categories.map((cat, idx) => (
            <div key={idx}>
              <h3 className="text-3xl font-black uppercase mb-8 border-l-8 border-lime-400 pl-6">{cat.title}</h3>
              <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                {cat.items.map((item, i) => (
                  <div key={i} className="bg-white p-4 flex flex-col gap-4 hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-black group h-full">
                    <div className="w-full h-48 bg-gray-200 overflow-hidden relative">
                      <img src={item.img} alt={item.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                      <div className="absolute top-2 right-2 bg-black text-lime-400 font-black px-2 py-1 text-sm skew-x-[-10deg]">
                        ‚Çπ{item.price}
                      </div>
                    </div>
                    <div className="flex-grow flex flex-col">
                      <h4 className="text-lg font-bold uppercase mb-2 leading-tight">{item.name}</h4>
                      <div className="flex flex-wrap gap-2 mb-3">
                         {item.tags.map((tag, tIdx) => (
                           <Badge key={tIdx} icon={tag.i} text={tag.t} />
                         ))}
                      </div>
                      <p className="text-sm text-gray-500 mt-auto">{item.desc}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

/* 3. FRANCHISE PAGE */
const FranchisePage = () => {
  return (
    <div className="pt-24 pb-20">
      <div className="bg-lime-400 py-24 px-6">
        <div className="container mx-auto max-w-4xl text-center">
          <h1 className="text-6xl md:text-8xl font-black uppercase leading-none mb-6 text-black">
            Build Your <br/> Empire
          </h1>
          <p className="text-xl md:text-2xl font-bold mb-8 text-gray-800">
            India's First Dedicated Gym-Caf√© Franchise Model.
          </p>
          <div className="flex justify-center">
            <Button variant="secondary" className="scale-125">Download Deck</Button>
          </div>
        </div>
      </div>

      <div className="container mx-auto px-6 py-20">
        <div className="grid md:grid-cols-3 gap-12">
          {[
            { title: "Low CapEx", desc: "Small footprint (300 sqft), high efficiency design means lower initial investment." },
            { title: "Captive Audience", desc: "Situated inside gyms. Your customers are literally walking past your door every day." },
            { title: "High Margins", desc: "Specialized menu with high-value add-ons like supplements and meal subscriptions." }
          ].map((item, i) => (
            <div key={i} className="border-t-4 border-black pt-6">
              <h3 className="text-2xl font-black uppercase mb-4">{item.title}</h3>
              <p className="text-gray-600 leading-relaxed">{item.desc}</p>
            </div>
          ))}
        </div>

        <div className="mt-24 bg-black text-white p-8 md:p-16">
          <div className="grid md:grid-cols-2 gap-16">
            <div>
              <h3 className="text-4xl font-black uppercase mb-8 text-lime-400">Requirements</h3>
              <ul className="space-y-6 text-lg font-medium">
                <li className="flex items-start gap-4">
                  <span className="bg-lime-400 text-black w-8 h-8 flex items-center justify-center font-bold rounded-sm flex-shrink-0">1</span>
                  <span>Space: 300 - 800 sq ft (Gym or High Street)</span>
                </li>
                <li className="flex items-start gap-4">
                  <span className="bg-lime-400 text-black w-8 h-8 flex items-center justify-center font-bold rounded-sm flex-shrink-0">2</span>
                  <span>Investment: ‚Çπ15L - ‚Çπ30L</span>
                </li>
                <li className="flex items-start gap-4">
                  <span className="bg-lime-400 text-black w-8 h-8 flex items-center justify-center font-bold rounded-sm flex-shrink-0">3</span>
                  <span>Passion for Fitness & Community</span>
                </li>
              </ul>
            </div>
            
            <form className="bg-gray-900 p-8 border border-gray-800" onSubmit={(e) => e.preventDefault()}>
               <h4 className="text-2xl font-bold uppercase mb-6">Apply Now</h4>
               <input className="w-full bg-black border border-gray-700 p-4 mb-4 text-white focus:border-lime-400 outline-none" placeholder="FULL NAME" />
               <input className="w-full bg-black border border-gray-700 p-4 mb-4 text-white focus:border-lime-400 outline-none" placeholder="PHONE NUMBER" />
               <input className="w-full bg-black border border-gray-700 p-4 mb-4 text-white focus:border-lime-400 outline-none" placeholder="CITY" />
               <Button variant="primary" className="w-full">Submit Interest</Button>
            </form>
          </div>
        </div>
      </div>
    </div>
  );
};

/* 4. ABOUT & CONTACT Combined for cleaner nav */
const AboutPage = () => {
  return (
    <div className="pt-24 pb-20">
      <div className="container mx-auto px-6">
        <div className="flex flex-col md:flex-row gap-12 mb-24">
          <div className="md:w-1/2">
            <SectionHeading title="Who We Are" subtitle="Origin Story" />
            <p className="text-xl font-medium leading-relaxed mb-6">
              We were tired of finishing a brutal leg day and having nowhere to eat that matched our goals.
            </p>
            <p className="text-gray-600 leading-relaxed mb-6">
              Gainz & Grabs was born from a simple necessity: Real food, real macros, real fast. We aren't just a caf√©; we are a nutritional support system for athletes, bodybuilders, and anyone trying to live healthier.
            </p>
          </div>
          <div className="md:w-1/2">
             <img src={IMAGES.interior} className="w-full h-full object-cover filter grayscale contrast-125" />
          </div>
        </div>

        <div className="grid md:grid-cols-2 gap-8 bg-lime-50 p-12">
           <div>
             <h3 className="text-3xl font-black uppercase mb-6">Contact HQ</h3>
             <div className="space-y-4 font-medium text-lg">
               <p className="flex items-center gap-3"><Mail size={20}/> franchise@gainzandgrabs.com</p>
               <p className="flex items-center gap-3"><Phone size={20}/> +91 98765 43210</p>
               <p className="flex items-center gap-3"><MapPin size={20}/> Bandra West, Mumbai</p>
             </div>
             <div className="flex gap-4 mt-8">
               <div className="bg-black text-white p-3 hover:bg-lime-400 hover:text-black transition-colors cursor-pointer"><Instagram /></div>
               <div className="bg-black text-white p-3 hover:bg-lime-400 hover:text-black transition-colors cursor-pointer"><Twitter /></div>
             </div>
           </div>
           <div className="bg-white p-8 shadow-lg">
             <h4 className="font-bold uppercase mb-4">Send us a message</h4>
             <textarea className="w-full bg-gray-100 p-4 mb-4 outline-none border-b-2 border-transparent focus:border-black" placeholder="How can we help?" rows={4}></textarea>
             <Button variant="secondary" className="w-full">Send</Button>
           </div>
        </div>
      </div>
    </div>
  );
};

/* --- MAIN APP SHELL --- */
const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isCoachOpen, setIsCoachOpen] = useState(false); // State for AI Coach Modal

  useEffect(() => { window.scrollTo(0, 0); setIsMenuOpen(false); }, [currentPage]);

  const NavLink = ({ page, label }) => (
    <button 
      onClick={() => setCurrentPage(page)}
      className={`font-bold uppercase tracking-wider text-sm hover:text-lime-500 transition-colors ${currentPage === page ? 'text-lime-600' : 'text-black'}`}
    >
      {label}
    </button>
  );

  return (
    <div className="font-sans text-black bg-white min-h-screen flex flex-col selection:bg-lime-400 selection:text-black">
      {/* AI Coach Modal */}
      <AICoachModal isOpen={isCoachOpen} onClose={() => setIsCoachOpen(false)} />

      {/* Navbar */}
      <nav className="fixed w-full z-50 bg-white/95 backdrop-blur border-b border-gray-200">
        <div className="container mx-auto px-6 h-20 flex justify-between items-center">
          {/* Logo */}
          <div className="cursor-pointer flex items-center gap-2" onClick={() => setCurrentPage('home')}>
             <img src={IMAGES.logo} alt="LOGO" className="h-12 w-auto object-contain" />
          </div>

          {/* Desktop Nav */}
          <div className="hidden md:flex items-center gap-10">
            <NavLink page="home" label="Home" />
            <NavLink page="menu" label="Menu" />
            <NavLink page="franchise" label="Franchise" />
            <NavLink page="about" label="About & Contact" />
            
            {/* AI Coach Button (Nav) */}
            <button 
              onClick={() => setIsCoachOpen(true)}
              className="flex items-center gap-1 font-bold uppercase text-sm text-lime-600 hover:text-black transition-colors"
            >
              <Sparkles size={16} /> Coach
            </button>

            <Button variant="primary" className="!py-2 !px-6 !text-xs" onClick={() => setCurrentPage('franchise')}>
              Get Started
            </Button>
          </div>

          {/* Mobile Menu Toggle */}
          <button className="md:hidden" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X size={32} /> : <Menu size={32} />}
          </button>
        </div>

        {/* Mobile Menu */}
        {isMenuOpen && (
          <div className="md:hidden bg-black text-white absolute top-20 left-0 w-full min-h-screen p-8 flex flex-col gap-8">
            <button onClick={() => setCurrentPage('home')} className="text-3xl font-black uppercase text-left hover:text-lime-400">Home</button>
            <button onClick={() => setCurrentPage('menu')} className="text-3xl font-black uppercase text-left hover:text-lime-400">Menu</button>
            <button onClick={() => setCurrentPage('franchise')} className="text-3xl font-black uppercase text-left hover:text-lime-400">Franchise</button>
            <button onClick={() => setCurrentPage('about')} className="text-3xl font-black uppercase text-left hover:text-lime-400">Contact</button>
            <button onClick={() => { setIsCoachOpen(true); setIsMenuOpen(false); }} className="text-3xl font-black uppercase text-left text-lime-400">‚ú® AI Smart Coach</button>
          </div>
        )}
      </nav>

      {/* Content */}
      <main className="flex-grow">
        {currentPage === 'home' && <HomePage navigate={setCurrentPage} openCoach={() => setIsCoachOpen(true)} />}
        {currentPage === 'menu' && <MenuPage />}
        {currentPage === 'franchise' && <FranchisePage />}
        {currentPage === 'about' && <AboutPage />}
      </main>

      {/* Footer */}
      <footer className="bg-black text-white pt-20 pb-10 border-t-8 border-lime-400">
        <div className="container mx-auto px-6">
          <div className="flex flex-col md:flex-row justify-between items-start mb-16 gap-12">
            <div className="max-w-md">
              <img src={IMAGES.logo} className="h-16 w-auto mb-6 invert brightness-0" alt="Logo" />
              <h2 className="text-4xl font-black uppercase leading-none mb-6">
                Eat Like <br/><span className="text-lime-400">You Train.</span>
              </h2>
            </div>
            <div className="grid grid-cols-2 gap-12">
              <div>
                <h4 className="font-bold uppercase text-gray-500 mb-4 tracking-widest text-sm">Explore</h4>
                <ul className="space-y-2 font-bold uppercase">
                  <li className="hover:text-lime-400 cursor-pointer" onClick={() => setCurrentPage('menu')}>Menu</li>
                  <li className="hover:text-lime-400 cursor-pointer" onClick={() => setCurrentPage('franchise')}>Franchise</li>
                  <li className="hover:text-lime-400 cursor-pointer" onClick={() => setCurrentPage('about')}>Locations</li>
                </ul>
              </div>
              <div>
                <h4 className="font-bold uppercase text-gray-500 mb-4 tracking-widest text-sm">Social</h4>
                <ul className="space-y-2 font-bold uppercase">
                  <li className="hover:text-lime-400 cursor-pointer">Instagram</li>
                  <li className="hover:text-lime-400 cursor-pointer">Facebook</li>
                  <li className="hover:text-lime-400 cursor-pointer">LinkedIn</li>
                </ul>
              </div>
            </div>
          </div>
          <div className="border-t border-gray-900 pt-8 flex flex-col md:flex-row justify-between items-center text-gray-600 text-sm font-bold uppercase tracking-wider">
            <p>&copy; 2024 Gainz & Grabs. All Rights Reserved.</p>
            <p>Designed for Athletes.</p>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default App;